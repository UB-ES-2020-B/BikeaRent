webpackJsonp([1],{"K/jd":function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Tqaz"),a=(r("sWs5"),r("7+uW")),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=r("VU/8")({name:"App"},o,!1,function(t){r("gsu9")},null,null).exports,s=r("/ocq"),u=r("mtWM"),c=r.n(u),l={data:function(){return{user:{id:0,token:null,username:"Pene",money_available:69},bike:{id:0,battery:100,model:"",street:""},navigation:!1,active:!1}},methods:{getBikes:function(){var t=this;c.a.get("https://bikearent4.herokuapp.com/bikes").then(function(e){t.bikes=e.data.bikes}).catch(function(t){console.error(t)})},getAccount:function(){var t=this,e="https://bikearent4.herokuapp.com/account/"+this.user.id;c.a.get(e,{auth:{username:this.user.token}}).then(function(e){t.user=e.data.user}).catch(function(t){console.error(t)})},takeBike:function(t){this.bike=t,this.navigation=!0},unlockBike:function(){var t=this,e={user_id:this.user.id,bike_id:this.bike.id};c.a.post("https://bikearent4.herokuapp.com/rent",e).then(function(e){t.active=!0}).catch(function(t){console.error(t),alert("Sorry, you cannot take this bike. Try again")})},lockBike:function(){var t=this,e={user_id:this.user.id,bike_id:this.bike.id};c.a.put("https://bikearent4.herokuapp.com/rent",e).then(function(e){t.active=!1,t.navigation=!1,t.getAccount()}).catch(function(t){console.error(t),alert("Sorry, you cannot take this bike. Try again")})}},created:function(){this.getBikes(),this.getAccount(),this.user.username=this.$route.query.username,this.user.money_available=this.$route.query.token,this.user.token=this.$route.query.token}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t.navigation?r("div",[r("h3",[t._v("Go to "+t._s(this.bike.street)+" to unlock your bike.")]),t._v(" "),r("div",[t._v(" Once you ara next to the bike, press the Unlock button to start the renting")]),t._v(" "),r("br"),t._v(" "),r("button",{staticClass:"btn btn-outline-danger",on:{click:t.unlockBike}},[t._v("Unlock Bike")])]):r("div",[r("nav",{staticClass:"navbar navbar-dark"},[r("h2",{staticStyle:{color:"#d3d9df"}},[t._v("BaikaRent")]),t._v(" "),r("div",[r("h6",{staticStyle:{color:"#d3d9df"}},[t._v(t._s(this.user.username))]),t._v(" "),r("h6",{staticStyle:{color:"#d3d9df"}},[t._v(t._s(this.user.money_available)+" â‚¬")])])]),t._v(" "),r("table",[t._m(0),t._v(" "),t._l(t.bikes,function(e){return r("tbody",{key:e.id},[r("td",[t._v(t._s(e.model)+" ")]),t._v(" "),r("td",[t._v(t._s(e.street)+" ")]),t._v(" "),r("button",{staticClass:"btn btn-warning",on:{click:function(r){return t.takeBike(e)}}},[t._v("Take Bike")])])})],2)]),t._v(" "),t.active?r("div",[r("h1",[t._v("Time is running!!")]),t._v(" "),r("div",[t._v(" Once you have stoped the bike, press the Lock button to end the renting")]),t._v(" "),r("button",{staticClass:"btn btn-danger",on:{click:t.lockBike}},[t._v("Lock ")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticStyle:{"border-bottom":"5px solid #000"}},[e("tr",[e("th",[this._v("Bike model")]),this._v(" "),e("th",[this._v("Localated")])])])}]};var m=r("VU/8")(l,d,!1,function(t){r("c8u5")},null,null).exports,p={name:"LogIn",data:function(){return{user:{id:0,token:null,username:"",money_available:0},form:{name:"",surname:"",mail:"",usernameR:"",passwordR:"",dni:"",licence_caducity:"",credit_card:""}}},methods:{clearLogin:function(){this.username="",this.password="",this.form.name="",this.form.surname="",this.form.mail="",this.form.usernameR="",this.form.passwordR="",this.form.dni="",this.form.dni_caducity="",this.form.credit_card="",this.$bvModal.show("bv-modal")},checkLogin:function(){var t=this,e={username:this.username,password:this.password};if(""===e.username||""===e.password)alert("Empty fields! Please try again.");else{c.a.post("https://bikearent4.herokuapp.com/login",e).then(function(e){t.token=e.data.token,alert("Log In Succesfully"),t.getAccount(),t.$router.replace({path:"/home",query:{username:t.user.username,money:t.user.money_available,token:t.user.token}})}).catch(function(t){console.error(t),alert("Username or Password incorrect")})}},getAccount:function(){var t=this,e="https://bikearent4.herokuapp.com/account/"+this.user.id;c.a.get(e,{auth:{username:this.user.token}}).then(function(e){t.user=e.data.user}).catch(function(t){console.error(t)})},onSubmit:function(){this.$bvModal.hide("bv-modal");var t={name:this.form.name,surname:this.form.surname,mail:this.form.mail,usernameR:this.form.usernameR,passwordR:this.form.passwordR,dni:this.form.dni,licence_caducity:this.form.licence_caducity,credit_card:this.form.credit_card};c.a.post("https://bikearent4.herokuapp.com/account",t).then(function(t){alert("Sign Up Successful! New account created")}).catch(function(t){console.error(t),alert(t)})},onReset:function(){this.form.name="",this.form.surname="",this.form.mail="",this.form.usernameR="",this.form.passwordR="",this.form.dni="",this.form.licence_caducity="",this.form.credit_card=""}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"container",staticStyle:{"margin-bottom":"3%"}},[r("h1",{staticStyle:{"margin-bottom":"2%","font-weight":"bold"}},[t._v("Sign In")]),t._v(" "),r("div",{staticClass:"form-label-group1"},[t._m(0),t._v(" "),r("div",{staticClass:"row2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"username",id:"inputUsername",placeholder:"Username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"form-label-group1"},[t._m(1),t._v(" "),r("div",{staticClass:"row2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",staticStyle:{"margin-bottom":"5%"},attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"form-label-group1"},[r("div",{staticClass:"row2"},[r("button",{staticClass:"btn btn-primary btn-lg btn-block",staticStyle:{float:"right"},attrs:{type:"button"},on:{click:t.checkLogin}},[t._v("Sign In")]),t._v(" "),r("button",{staticClass:"btn btn-success btn-lg btn-block",staticStyle:{float:"right"},attrs:{type:"button"},on:{click:t.clearLogin}},[t._v("Create Account")])])]),t._v(" "),r("div",[r("b-modal",{attrs:{id:"bv-modal","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[r("h4",{staticStyle:{"text-align":"center"}},[t._v("Create Account")])]},proxy:!0}])},[t._v(" "),r("div",{staticClass:"d-block"},[r("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[r("b-form-group",{attrs:{id:"input-group-3",label:"Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",required:"",placeholder:"Enter your name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-4",label:"Surame:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",required:"",placeholder:"Enter your surname"},model:{value:t.form.surname,callback:function(e){t.$set(t.form,"surname",e)},expression:"form.surname"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-5",label:"Mail:","label-for":"input-3"}},[r("b-form-input",{attrs:{id:"input-3",required:"",placeholder:"Enter your mail"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-6",label:"Username:","label-for":"input-4"}},[r("b-form-input",{attrs:{id:"input-4",required:"",placeholder:"Enter your username"},model:{value:t.form.usernameR,callback:function(e){t.$set(t.form,"usernameR",e)},expression:"form.usernameR"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-7",label:"Password:","label-for":"input-5"}},[r("b-form-input",{attrs:{id:"input-5",required:"",placeholder:"Enter your username"},model:{value:t.form.passwordR,callback:function(e){t.$set(t.form,"passwordR",e)},expression:"form.passwordR"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-8",label:"DNI:","label-for":"input-6"}},[r("b-form-input",{attrs:{id:"input-6",required:"",placeholder:"Enter your DNI"},model:{value:t.form.dni,callback:function(e){t.$set(t.form,"dni",e)},expression:"form.dni"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-9",label:"DNI caducity:","label-for":"input-7"}},[r("b-form-input",{attrs:{id:"input-7",required:"",placeholder:"Enter your Caducity DNI date"},model:{value:t.form.dni_caducity,callback:function(e){t.$set(t.form,"dni_caducity",e)},expression:"form.dni_caducity"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-group-10",label:"Credit Card:","label-for":"input-8"}},[r("b-form-input",{attrs:{id:"input-8",required:"",placeholder:"Enter your credit card number"},model:{value:t.form.credit_card,callback:function(e){t.$set(t.form,"credit_card",e)},expression:"form.credit_card"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),r("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1)],1)])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row1"},[e("label",{staticStyle:{"font-weight":"bold"},attrs:{for:"inputUsername"}},[this._v("Username")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row1"},[e("label",{staticStyle:{"font-weight":"bold"},attrs:{for:"inputPassword"}},[this._v("Password")])])}]};var h=r("VU/8")(p,f,!1,function(t){r("K/jd")},null,null).exports;r("K3J8");a.default.use(s.a);var b=new s.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"Login",component:h},{path:"/home",name:"LlistatMotos",component:m}]});a.default.use(n.a),a.default.config.productionTip=!1,new a.default({router:b,render:function(t){return t(i)}}).$mount("#app")},c8u5:function(t,e){},gsu9:function(t,e){},sWs5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b63092ddc4e81b67a285.js.map